% Copyright 2012â€“2017 Patrick Gundlach (patrick@gundla.ch)
% Public repository: https://github.com/pgundlach/lua-check-hyphen
% Licensed under the MIT license. See the file 'mit-license.txt' for exact terms.

% Don't change these two lines, they are updated automatically
\def\luacheckhyphenpkgdate{2012/06/19}
\def\luacheckhyphenversion{0.1}


\RequirePackage{ifluatex}
\RequirePackage{luatexbase}
\RequirePackage{keyval}

\DeclareOption{final}{\setkeys{luacheckhyphen}{final}}
\DeclareOption{nofile}{\setkeys{luacheckhyphen}{nofile}}

\DeclareOption*{\setkeys{luacheckhyphen}{\CurrentOption}}

\ProvidesPackage{lua-check-hyphen}[\luacheckhyphenpkgdate\space v\luacheckhyphenversion\space Hyphenation checking for LuaTeX (PGU)]



\def\luacheckhyphendothings{\directlua{luacheckhyphen.enable() }}

\define@key{luacheckhyphen}{nofile}[true]{\directlua{luacheckhyphen.nofile  = "\luaescapestring{#1}"}}
\define@key{luacheckhyphen}{compact}[true]{\directlua{luacheckhyphen.compact  = "\luaescapestring{#1}"}}
\define@key{luacheckhyphen}{final}[true]{\directlua{luacheckhyphen.final  = "\luaescapestring{#1}"}}
\define@key{luacheckhyphen}{mark}[true]{\directlua{luacheckhyphen.mark     = "\luaescapestring{#1}"}}
\define@key{luacheckhyphen}{whitelist}{\directlua{luacheckhyphen.whitelist = "\luaescapestring{#1}"}}


\ifluatex
  \AtBeginDocument{\luacheckhyphendothings}
  \directlua{luacheckhyphen = require('lua-check-hyphen')}
  \def\LuaCheckHyphen#1{\setkeys{luacheckhyphen}{#1}}
  \AtEndDocument{\directlua{luacheckhyphen.listhyphenatedwords()}}
\else
  \def\LuaCheckHyphen#1{}
  \message{Warning: lua-check-hyphen only works with LuaTeX (LaTeX format for now)}
\fi

\ProcessOptions


